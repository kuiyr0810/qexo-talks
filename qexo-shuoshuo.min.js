// 文件名: qexo-shuoshuo.min.js
// 压缩版本，减小文件大小
!function(w,d){"use strict";var e={el:"#qexoShuoshuo",avatar:"https://img.kuiyr.de/file/1753932255231_image.png",name:"Sunshine.",age:"26岁/9岁",title:"助助「1」",lines:["大象向前望去","美国有着木制的古伦木","大象的影子古伦木对起了信号"],repeatingText:"古伦木！古伦木！...",theme:"主题与体验",limit:10,baseURL:"https://qexo.5200810.xyz",useLoadingImg:!1,animation:!0,autoDate:!0},t=`<style id="qexo-shuoshuo-styles">.qexo-shuoshuo-container{font-family:'SimSun','STKaiti','Microsoft YaHei',serif;background-color:#f8f5f0;color:#333;line-height:1.6;padding:20px;max-width:800px;margin:0 auto;position:relative;min-height:400px;background-image:linear-gradient(to bottom,transparent 95%,rgba(0,0,0,0.05) 100%);background-size:100% 30px}.qexo-shuoshuo-header{margin-bottom:60px;border-bottom:1px solid #d4c9b8;padding-bottom:15px;position:relative}.qexo-shuoshuo-avatar{width:60px;height:60px;border-radius:50%;object-fit:cover;position:absolute;right:0;top:0;border:2px solid #d4c9b8}.qexo-shuoshuo-title{font-size:2.2rem;font-weight:normal;letter-spacing:5px;margin-bottom:5px;position:relative;display:inline-block}.qexo-shuoshuo-title::after{content:"";position:absolute;bottom:-5px;left:0;width:60%;height:2px;background-color:#8b7355;transition:width .3s ease}.qexo-shuoshuo-title:hover::after{width:100%}.qexo-shuoshuo-name{font-size:1.2rem;color:#8b7355;font-style:italic;margin-top:10px;display:inline-block}.qexo-shuoshuo-age{font-size:1rem;color:#999;margin-left:10px}.qexo-shuoshuo-content{margin:40px 0;padding-left:10px}.qexo-shuoshuo-line{margin-bottom:25px;font-size:1.3rem;position:relative;padding-left:25px;opacity:0;transform:translateY(20px)}.qexo-shuoshuo-line::before{content:"·";position:absolute;left:0;color:#8b7355;font-size:1.8rem;top:-5px}.qexo-shuoshuo-line:nth-child(1){animation-delay:.1s}.qexo-shuoshuo-line:nth-child(2){animation-delay:.3s}.qexo-shuoshuo-line:nth-child(3){animation-delay:.5s}.qexo-shuoshuo-line:nth-child(4){animation-delay:.7s}.qexo-shuoshuo-repeating{font-size:1.1rem;color:#666;font-style:italic;margin-top:10px;padding-left:40px;opacity:0;animation:fadeIn 1s ease-out 1.5s forwards}.qexo-shuoshuo-theme{margin-top:80px;padding-top:30px;border-top:1px dashed #d4c9b8;text-align:center}.qexo-shuoshuo-theme-title{font-size:1.5rem;letter-spacing:8px;color:#8b7355;position:relative;display:inline-block;padding:0 20px;background-color:#f8f5f0}.qexo-shuoshuo-theme-title::before,.qexo-shuoshuo-theme-title::after{content:"※";position:absolute;top:50%;transform:translateY(-50%);font-size:1rem}.qexo-shuoshuo-theme-title::before{left:-10px}.qexo-shuoshuo-theme-title::after{right:-10px}.qexo-shuoshuo-footer{margin-top:40px;text-align:center;font-size:.9rem;color:#999;padding-bottom:20px}.qexo-shuoshuo-date{position:absolute;top:40px;right:80px;font-size:.9rem;color:#999}.qexo-shuoshuo-loading{text-align:center;padding:40px;color:#8b7355;font-style:italic}.qexo-shuoshuo-line-animated{animation:fadeInUp .8s ease-out forwards}@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@media (max-width:600px){.qexo-shuoshuo-container{padding:15px}.qexo-shuoshuo-title{font-size:1.8rem}.qexo-shuoshuo-line{font-size:1.1rem}.qexo-shuoshuo-avatar{width:50px;height:50px}.qexo-shuoshuo-date{position:static;margin-bottom:20px;text-align:right}}</style>`;class QexoShuoshuo{constructor(o){this.config=Object.assign({},e,o),this.container=null,this.init()}init(){if(this.injectStyles(),this.container=d.querySelector(this.config.el),!this.container)return console.error(`QexoShuoshuo: 找不到元素 ${this.config.el}`),void 0;this.config.useLoadingImg&&(this.container.innerHTML='<div class="qexo-shuoshuo-loading">加载中...</div>'),this.render(),Promise.resolve(this)}injectStyles(){if(d.querySelector("#qexo-shuoshuo-styles"))return;let o=d.createElement("div");o.innerHTML=t,d.head.appendChild(o.children[0])}getCurrentDate(){return new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}render(){let o=this.config.autoDate?this.getCurrentDate():"",r=`<div class="qexo-shuoshuo-container">${o?`<div class="qexo-shuoshuo-date">${o}</div>`:""}<div class="qexo-shuoshuo-header"><h1 class="qexo-shuoshuo-title">${this.config.title}</h1><div><span class="qexo-shuoshuo-name">${this.config.name}</span><span class="qexo-shuoshuo-age">${this.config.age}</span></div>${this.config.avatar?`<img src="${this.config.avatar}" alt="${this.config.name}" class="qexo-shuoshuo-avatar">`:""}</div><div class="qexo-shuoshuo-content">${this.config.lines.map((e,t)=>`<div class="qexo-shuoshuo-line ${this.config.animation?"qexo-shuoshuo-line-animated":""}">${e}</div>`).join("")}${this.config.repeatingText?`<div class="qexo-shuoshuo-repeating">${this.config.repeatingText}</div>`:""}</div><div class="qexo-shuoshuo-theme"><div class="qexo-shuoshuo-theme-title">${this.config.theme}</div></div><div class="qexo-shuoshuo-footer">Qexo 说说 · 诗意栖息地</div></div>`;this.container.innerHTML=r,this.addInteractions(),setTimeout(()=>{this.container.dispatchEvent(new CustomEvent("qexo-shuoshuo:loaded",{detail:{config:this.config}}))},100)}addInteractions(){this.container.querySelectorAll(".qexo-shuoshuo-line").forEach(e=>{e.addEventListener("click",()=>{e.style.transform="translateX(10px)",e.style.transition="transform .3s",setTimeout(()=>{e.style.transform="translateX(0)"},300)})});let e=this.container.querySelector(".qexo-shuoshuo-avatar");e&&(e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1) rotate(5deg)",e.style.transition="transform .3s"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1) rotate(0deg)"}))}update(o){return this.config=Object.assign({},this.config,o),this.render(),Promise.resolve(this)}addLine(o){return this.config.lines.push(o),this.render(),Promise.resolve(this)}clear(){return this.container.innerHTML="",Promise.resolve(this)}getConfig(){return Object.assign({},this.config)}}w.QexoShuoshuo=QexoShuoshuo,d.addEventListener("DOMContentLoaded",function(){d.querySelectorAll("[data-qexo-shuoshuo]").forEach(o=>{let r={el:"#"+o.id,title:o.dataset.title||e.title,name:o.dataset.name||e.name,age:o.dataset.age||e.age,avatar:o.dataset.avatar||e.avatar,theme:o.dataset.theme||e.theme,animation:o.dataset.animation!=="false"};o.dataset.lines&&(r.lines=JSON.parse(o.dataset.lines)),new QexoShuoshuo(r)})})}(window,document);